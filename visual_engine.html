<!-- Chosen Palette: "Retina Burn" - Deep Black (#000), Hyper Cyan (#0ff), Magenta (#f0f), White (#fff). High contrast for visual clarity. -->

<!-- Application Structure Plan:
    1.  **Scene Selector:** A dropdown menu populated with the key narrative beats from the Master Script (Omnibus).
    2.  **Style Matrix:** Buttons to toggle between visual styles (Cinematic, Anime, Glitch, Noir) to adapt the prompt to different media needs.
    3.  **Format Controller:** Aspect ratio toggles (16:9, 9:16, 2:3).
    4.  **Prompt Forge (Output):** A terminal-like display that dynamically assembles the final prompt string based on selections.
    5.  **Clipboard Bridge:** A one-click copy function with visual feedback.
-->

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOMINUS VISUAL ENGINE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { background-color: #050505; color: #e5e5e5; font-family: 'Rajdhani', sans-serif; }
        .mono { font-family: 'Share Tech Mono', monospace; }

        /* Neon Glows */
        .glow-cyan { text-shadow: 0 0 10px #06b6d4; }
        .border-glow { box-shadow: 0 0 15px rgba(6, 182, 212, 0.2); }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: #06b6d4; border-radius: 3px; }

        /* Terminal Effect */
        .terminal-window {
            background: rgba(10, 10, 10, 0.95);
            border: 1px solid #333;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }

        .prompt-output {
            background: #000;
            border-left: 3px solid #06b6d4;
            color: #06b6d4;
        }

        .active-style {
            background-color: #1f2937;
            color: white;
            border-color: #06b6d4;
        }

        .active-ar {
            background-color: #1f2937;
            color: white;
            border-color: #22c55e;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col p-4 md:p-8 selection:bg-cyan-500 selection:text-black bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]">

    <!-- Header -->
    <header class="flex justify-between items-end mb-8 border-b border-gray-800 pb-4">
        <div>
            <h1 class="text-4xl font-bold tracking-widest text-white uppercase glow-cyan">Dominus<span class="text-cyan-500">_Visual</span></h1>
            <p class="text-xs text-gray-500 mono tracking-[0.3em]">MOTOR DE RENDERIZADO NARRATIVO v1.0</p>
        </div>
        <div class="text-right hidden md:block">
            <div class="text-xs font-bold text-gray-600">ESTADO DEL SISTEMA</div>
            <div class="text-green-500 font-mono text-sm">ONLINE // ESPERANDO INPUT</div>
        </div>
    </header>

    <!-- Main Interface -->
    <main class="grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-7xl mx-auto w-full">

        <!-- Controls -->
        <div class="lg:col-span-1 space-y-6">

            <!-- Scene Selector -->
            <div class="bg-[#0f0f0f] p-6 rounded border border-gray-800 border-glow">
                <label class="block text-xs font-bold text-cyan-500 mb-2 uppercase tracking-wider">01. Selecciona Secuencia</label>
                <select id="sceneSelect" class="w-full bg-black border border-gray-700 text-gray-300 p-3 rounded mono text-sm focus:border-cyan-500 focus:outline-none transition-colors">
                    <option value="fall">Sec 01: La Caída de Ícaro (Estadio)</option>
                    <option value="forum">Sec 02: El Foro y el Holograma</option>
                    <option value="glitch_rardo">Sec 02: La Alucinación de Rardo</option>
                    <option value="kneel">Sec 03: La Rodilla y el Chip Rojo</option>
                    <option value="delorean">Sec 04: El Viaje Psicodélico</option>
                    <option value="volcano">Sec 08: La Diablita y el Volcán</option>
                    <option value="fusion">Sec 09: La Fusión Biomecánica</option>
                    <option value="wishes">Sec 09: Los 3 Deseos (Pizza/Micrófono)</option>
                    <option value="climax">Sec 12: El Duelo Final (Trono)</option>
                    <option value="loop_break">Sec 15: El Doble Guiño (Final)</option>
                </select>
            </div>

            <!-- Style Modifiers -->
            <div class="bg-[#0f0f0f] p-6 rounded border border-gray-800">
                <label class="block text-xs font-bold text-purple-500 mb-2 uppercase tracking-wider">02. Estilo Visual</label>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="setStyle('cinematic')" class="style-btn p-2 border border-gray-700 rounded text-xs hover:bg-gray-800 hover:text-white text-gray-400 transition-all text-left active-style" data-style="cinematic">Hyper-Cinematic</button>
                    <button onclick="setStyle('anime')" class="style-btn p-2 border border-gray-700 rounded text-xs hover:bg-gray-800 hover:text-white text-gray-400 transition-all text-left" data-style="anime">Cyberpunk Anime</button>
                    <button onclick="setStyle('glitch')" class="style-btn p-2 border border-gray-700 rounded text-xs hover:bg-gray-800 hover:text-white text-gray-400 transition-all text-left" data-style="glitch">Glitch Art / Abstract</button>
                    <button onclick="setStyle('comic')" class="style-btn p-2 border border-gray-700 rounded text-xs hover:bg-gray-800 hover:text-white text-gray-400 transition-all text-left" data-style="comic">Graphic Novel / Noir</button>
                </div>
            </div>

            <!-- Aspect Ratio -->
            <div class="bg-[#0f0f0f] p-6 rounded border border-gray-800">
                <label class="block text-xs font-bold text-green-500 mb-2 uppercase tracking-wider">03. Formato (Aspect Ratio)</label>
                <div class="flex gap-2">
                    <button onclick="setAr('--ar 16:9')" class="ar-btn flex-1 p-2 border border-gray-700 rounded text-xs hover:bg-gray-800 text-gray-400 active-ar">16:9 (Cine)</button>
                    <button onclick="setAr('--ar 9:16')" class="ar-btn flex-1 p-2 border border-gray-700 rounded text-xs hover:bg-gray-800 text-gray-400">9:16 (Móvil)</button>
                    <button onclick="setAr('--ar 2:3')" class="ar-btn flex-1 p-2 border border-gray-700 rounded text-xs hover:bg-gray-800 text-gray-400">2:3 (Cómic)</button>
                </div>
            </div>

            <button onclick="generatePrompt()" class="w-full bg-cyan-900/50 hover:bg-cyan-700 text-cyan-100 font-bold py-4 rounded border border-cyan-500/50 transition-all shadow-[0_0_20px_rgba(6,182,212,0.2)] flex items-center justify-center gap-2">
                <i data-lucide="cpu" class="w-5 h-5"></i> GENERAR CÓDIGO VISUAL
            </button>

        </div>

        <!-- Output Terminal -->
        <div class="lg:col-span-2 flex flex-col h-full">
            <div class="terminal-window rounded-lg flex flex-col h-full overflow-hidden">
                <!-- Terminal Header -->
                <div class="bg-[#1a1a1a] px-4 py-2 flex items-center gap-2 border-b border-[#333]">
                    <div class="flex gap-1.5">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                    <div class="text-[10px] text-gray-500 mono ml-2">midjourney_v6_bridge.exe</div>
                </div>

                <!-- Terminal Body -->
                <div class="p-6 flex-1 font-mono text-sm overflow-y-auto">
                    <div class="text-gray-500 mb-4">> Inicializando motor semántico... OK<br>> Cargando texturas de "Infierno Virtual"... OK</div>

                    <div class="mb-2 text-white font-bold">PROMPT GENERADO:</div>
                    <div id="outputContainer" class="prompt-output p-4 rounded text-sm leading-relaxed opacity-50 transition-opacity duration-300">
                        // Selecciona una escena y presiona Generar...
                    </div>

                    <div id="copyFeedback" class="mt-4 text-green-500 text-xs hidden">
                        > Copiado al portapapeles con éxito.
                    </div>
                </div>

                <!-- Footer Actions -->
                <div class="p-4 bg-[#1a1a1a] border-t border-[#333] flex justify-end">
                    <button onclick="copyToClipboard()" class="bg-white text-black px-6 py-2 rounded font-bold hover:bg-gray-200 transition-colors text-xs flex items-center gap-2">
                        <i data-lucide="copy" class="w-4 h-4"></i> COPIAR PROMPT
                    </button>
                </div>
            </div>
        </div>

    </main>

    <script>
        lucide.createIcons();

        // --- DATA ---
        let currentStyle = 'cinematic';
        let currentAr = '--ar 16:9';

        const styleModifiers = {
            'cinematic': "cinematic lighting, photorealistic, 8k, unreal engine 5 render, depth of field, anamorphic lens, color graded, ray tracing, volumetric fog --stylize 250",
            'anime': "anime style, production ig, ghost in the shell vibe, highly detailed, cel shaded, dynamic angle, vibrant neon colors --niji 6",
            'glitch': "glitch art, datamoshing, corrupted data texture, vhs static, chromatic aberration, digital decay, abstract, surreal --stylize 700",
            'comic': "graphic novel style, frank miller contrast, heavy ink lines, noir atmosphere, dynamic shading, comic book layout, intense shadows --v 6.0"
        };

        const sceneData = {
            'fall': "Extreme wide vertical shot, a man falling from the sky, sky is made of green digital glitch clouds and static, he is wearing streetwear clothes flapping violently, below him is an infinite floor of polished black obsidian, high contrast, oppressive atmosphere.",
            'forum': "Futuristic minimal auditorium, a handsome man on a floating white stage holding a glowing halo device, behind him a giant hologram of a complex neural network galaxy, audience in dark silhouette, warm spotlight on the man, ted talk vibe but cyberpunk.",
            'glitch_rardo': "Psychological horror shot, a wealthy man in a suit screaming in terror at empty space, digital distortion around him, a ghost made of red corrupted code emerging from the floor, glitch artifacts, nightmare fuel, dark stage lighting.",
            'kneel': "Iconic shot, a man kneeling on one knee on a metallic stage, head bowed in submission, offering a glowing red microchip with both hands to an elegant villain standing above him, red alert lighting, dramatic shadows, tension.",
            'delorean': "Interior of a modified DeLorean time machine, messy cables everywhere, glowing dashboard with cyberpunk UI, a man driving while drinking a glowing iridescent liquid from a flask, psychedelic colors melting outside the windows, synthwave aesthetic.",
            'volcano': "A massive mountain made of discarded computer servers and rusty robots, smoke rising, red sky, a cyborg woman sitting on a throne of motherboards at the top, holding a giant futuristic rifle, post-apocalyptic cyberpunk landscape.",
            'fusion': "Biomechanical surrealism, H.R. Giger style, a human man and a female android fusing together, cables intertwining like muscle fibers, glowing violet light emanating from the connection, intimacy and technology, divine atmosphere.",
            'wishes': "Surreal scene in a white void, an old bearded cyberpunk monk sitting in lotus position, floating next to him is a pizza box that glows like gold and a chrome microphone with spikes, ethereal lighting, minimal composition.",
            'climax': "Action shot, throne room made of black servers, a young man punching an old cyborg villain in the face, digital sparks flying, reality shattering like glass in the background, intense motion blur, epic battle.",
            'loop_break': "Close up of a man's face, dirty and bruised, looking directly at the camera lens, winking one eye with a sly smile, breaking the fourth wall, background is frozen in time, high detail on the eye."
        };

        // --- LOGIC ---

        function setStyle(style) {
            currentStyle = style;
            document.querySelectorAll('.style-btn').forEach(btn => {
                btn.classList.remove('active-style');
                btn.classList.add('border-gray-700', 'text-gray-400');
                if(btn.dataset.style === style) {
                    btn.classList.add('active-style');
                    btn.classList.remove('border-gray-700', 'text-gray-400');
                }
            });
        }

        function setAr(ar) {
            currentAr = ar;
            document.querySelectorAll('.ar-btn').forEach(btn => {
                btn.classList.remove('active-ar');
                if(btn.innerText.includes(ar.replace('--ar ', ''))) {
                    btn.classList.add('active-ar');
                }
            });
        }

        function generatePrompt() {
            const sceneKey = document.getElementById('sceneSelect').value;
            const corePrompt = sceneData[sceneKey];
            const modifiers = styleModifiers[currentStyle];

            const fullPrompt = `/imagine prompt: ${corePrompt}, ${modifiers} ${currentAr}`;

            const output = document.getElementById('outputContainer');
            output.innerText = fullPrompt;
            output.style.opacity = '1';
            output.classList.add('glow-cyan');
            setTimeout(() => output.classList.remove('glow-cyan'), 500);
        }

        function copyToClipboard() {
            const text = document.getElementById('outputContainer').innerText;
            if(text.includes('//')) return; // Don't copy placeholder

            // Using modern clipboard API with fallback
            if (navigator.clipboard && window.isSecureContext) {
                 navigator.clipboard.writeText(text);
            } else {
                 // Fallback for older browsers or non-secure contexts (e.g., http localhost)
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.left = "-9999px";
                textArea.style.top = "0";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                } catch (err) {
                    console.error('Unable to copy to clipboard', err);
                }
                document.body.removeChild(textArea);
            }

            const feedback = document.getElementById('copyFeedback');
            feedback.classList.remove('hidden');
            setTimeout(() => feedback.classList.add('hidden'), 2000);
        }

        // Init Styles (Ensure UI reflects default state)
        setStyle('cinematic');
        setAr('--ar 16:9');

    </script>
</body>
</html>